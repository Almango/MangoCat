---
title: Astro MangoCatä¸»é¢˜å¼€å‘æ—¥å¿—
description: è¿™æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹å¼€å‘çš„Astroåšå®¢ä¸»é¢˜ï¼Œç”¨äºå±•ç¤ºæˆ‘çš„å­¦ä¹ ç¬”è®°å’ŒæŠ€æœ¯åˆ†äº«ã€‚
published: 2025-12-06 16:27:41
tags: [C++, æ•°æ®ç»“æ„]                               # æ·»åŠ åˆ†ç±»
category: å­¦ä¹ ç¬”è®° 
slug: "83x33k23"
---

[[toc]]


å…³äºè¿™ä¸ªé¡¹ç›®æ˜¯æ€ä¹ˆå†™å‡ºæ¥çš„ï¼Œå…¶å®æ˜¯ç”¨AIæ‰‹æ“å‡ºæ¥çš„ï¼ŒAIè´Ÿè´£å†™åŠŸèƒ½ï¼Œæˆ‘è´Ÿè´£å†™æ ·å¼ã€‚
æ ·å¼å½“ç„¶ä¹Ÿä¸æ˜¯å‡­ç©ºæƒ³å‡ºæ¥çš„ï¼Œè€Œæ˜¯å€Ÿé‰´ä¸€äº›ä¸»é¢˜é¡¹ç›®ï¼Œä¾‹å¦‚ï¼š
- **ä¸»é¡µæ–‡ç« åˆ—è¡¨**å€Ÿé‰´äº†ï¼š[Pure](https://astro-pure.js.org/blog)
- **å¯¼èˆªæ ä¸ä¸»é¡µå¤´åƒè®¾è®¡**å€Ÿé‰´äº†ï¼š[åå¸æ°”æ³¡](https://blog.toastbubble.top/)
- **åˆ†ç±»ã€å½’æ¡£é¡µå’Œæ–‡ç« æ ¼å¼**å€Ÿé‰´çš„æ˜¯ï¼š[çº¸é¹¿æ‘¸é±¼å¤„](https://blog.zhilu.site/archive)
......


1. è™½ç„¶æœ€ç»ˆçš„æ ·å¼æ˜¯æœç€æˆ‘çš„é¢„æœŸæ–¹å‘å‘å±•çš„ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜ä¸æ–­å †ç§¯äº†ä¸‹æ¥ï¼Œé¦–å…ˆæ˜¯markdownçš„æ ·å¼æ ¼å¼ï¼Œè¿™ä¸ªå®Œå®Œå…¨å…¨æ˜¯æ‰‹æ“çš„ï¼Œå¾ˆå¤šåœ°æ–¹å¹¶ä¸å®Œç¾ï¼Œæˆ‘å¾ˆå¸Œæœ›æœ‰ä¸ªæ’ä»¶èƒ½ä¸€æ¬¡æ€§è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸æ˜¯éœ€è¦ä»€ä¹ˆæ ·å¼å°±ç›´æ¥å¾€markdown.cssä¸­å†™ï¼Œä»£ç å°±ä¼šè¶Šå†™è¶ŠğŸ’©ï¼Œå…¶æ¬¡æ˜¯CSSå †ç§¯ï¼Œå› ä¸ºæˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨åŸå­æ ·å¼TailWindCSSï¼Œç”¨äºçº¦æŸå¸ƒå±€å’Œæ ¼å¼çš„æ ·å¼éƒ½ä¼šå†™åœ¨global.cssä¸­ï¼Œè€Œå•é¡µé¢çš„ä¸“å±æ ·å¼åˆ™ç›´æ¥å†™åœ¨å•é¡µé¢ç»„ä»¶ä¸­ï¼Œè™½ç„¶æ”¹æ˜¯å¾ˆå¥½æ”¹ï¼Œä½†æ˜¯ä»£ç å¤ªå¤šäº†...è¿™æ˜¯è®©æˆ‘å›°æ‰°çš„ä¸€ç‚¹ï¼Œè¿™äº›é—®é¢˜å¾€å¾€ä¼šæ¨¡ç³Šæˆ‘å¯¹é¡¹ç›®æ•´ä¸ªç»“æ„çš„ç†è§£ï¼ˆå¯æ¶ï¼å†™ä¸€ä¸ªä¸»é¢˜ï¼ŒCSSå†™æˆå±å±±äº†ğŸ˜ ğŸ˜ ğŸ˜ ï¼‰

2. ä¸è¿‡åœ¨åç»­çš„å¼€å‘ä¸­ï¼Œæˆ‘ä¼šä¸æ–­å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼ŒåŒæ—¶ä¹Ÿä¼šæ•´ç†å‡ºæ•´ä¸ªé¡¹ç›®å®ç°ç»“æ„...


3. åŸºäºç®€æ´çš„ç†å¿µï¼Œæˆ‘åˆ é™¤äº†å¾ˆå¤šå®é™…æµè§ˆæ—¶å‡ ä¹ç”¨ä¸åˆ°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š
- **å¤šé€‰é¡¹ç¿»é¡µåŠŸèƒ½**ï¼šæˆ‘ä»…æä¾›äº†ç¿»é¡µå’Œæ˜¾ç¤ºæ€»é¡µæ•°çš„åŠŸèƒ½ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºç¿»ç¬¬ä¸‰é¡µï¼Œç¬¬å››é¡µå‡ ä¹ç”¨ä¸åˆ°ï¼Œè¿˜æœ‰ä¸€æ¬¡æ€§ç¿»åˆ°æœ€åä¸€é¡µçš„åŠŸèƒ½ä¹Ÿç”¨ä¸åˆ°ï¼Œå¦‚æœè¦è¿›è¡Œç²¾å‡†ç¿»é¡µï¼Œç›´æ¥åœ¨URLä¸­è¾“å…¥é¡µç å³å¯ã€‚
- **æ ‡ç­¾é¡µ**ï¼šæˆ‘è®¤ä¸ºåˆ†ç±»çš„æƒé‡æ›´é«˜ï¼Œç›´æ¥ä½¿ç”¨åˆ†ç±»ä¼šæ›´æ–¹ä¾¿ï¼Œå½“ç„¶äº†ï¼Œæˆ‘ç°åœ¨æ˜¯è¿™ä¹ˆè®¤ä¸ºçš„ï¼Œåç»­å¯èƒ½ä¼šè€ƒè™‘æ·»åŠ æ ‡ç­¾é¡µåŠŸèƒ½ã€‚
- **æ–‡ç« å°é¢**ï¼šè™½ç„¶æˆ‘è€ƒè™‘è¿‡æ·»åŠ æ–‡ç« å°é¢åŠŸèƒ½ï¼Œä½†æˆ‘ç›®å‰è¿˜æ²¡æœ‰ä¸€ä¸ªç¨³å®šçš„å›¾åºŠ...



### CSSå…³é”®ç±»
`.container`ï¼šé€šç”¨å®¹å™¨ï¼Œç”¨äºåŒ…è£¹é¡µé¢çš„å†…å®¹ï¼ˆæ ¼å¼åŒ–å†…å®¹å¸ƒå±€ï¼‰ã€‚
`.article-container`ï¼šé€šç”¨å®¹å™¨ï¼Œç”¨äºåŒ…è£¹æ–‡ç« å†…å®¹ï¼ˆæ ¼å¼åŒ–æ–‡ç« å¸ƒå±€ï¼‰ã€‚

.containeråŸºæœ¬ä¸ŠåŒ…æ½äº†ä¸€åˆ‡ï¼Œå®ƒè¢«ç›´æ¥å¥—åœ¨Layoutç»„ä»¶ä¸­ï¼Œç”¨äºåŒ…è£¹é¡µé¢çš„å†…å®¹ï¼Œæ‰€ä»¥æ‰€æœ‰å¸ƒå±€éƒ½è¢«è¯¥å®¹å™¨æ‰€çº¦æŸï¼Œè¾¾åˆ°æ ·å¼çš„ç»Ÿä¸€ç®¡ç†ã€‚
.article-containeråˆ™æ˜¯ç”¨äºåŒ…è£¹æ–‡ç« å†…å®¹çš„å®¹å™¨ï¼Œå®ƒè¢«ç›´æ¥å¥—åœ¨æ–‡ç« ç»„ä»¶ä¸­ï¼Œç”¨äºæ ¼å¼åŒ–æ–‡ç« çš„å¸ƒå±€ï¼Œå½“ç„¶è¯¥å®¹å™¨ä¹Ÿè¢«.containeræ‰€çº¦æŸï¼Œè¾¾åˆ°æ ·å¼çš„ç»Ÿä¸€ç®¡ç†ã€‚
>




### å¸ƒå±€ç»„ä»¶
1. layoutsç›®å½•ç”¨äºå­˜æ”¾å¸ƒå±€ç»„ä»¶çš„ç›®å½•ï¼Œå®ƒä½œä¸ºä¸€ä¸ª<html><body></body></html>çš„å®¹å™¨ï¼Œç”¨äºåŒ…è£¹é¡µé¢çš„å†…å®¹ã€‚
```astro
---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
const { pagetitle, children } = Astro.props;

import "../styles/golbal.css";
import "../styles/markdown.css";
import "animate.css";
---
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>#</title>
  </head>
  <body>
    <Header />
      <slot />
      <Footer />
    </div>
  </body>
</html>
```
2. æˆ‘ä»¬å¯ä»¥å†™å¥½ä¸€äº›ç»„ä»¶ï¼Œå¦‚å¯¼èˆªæ ï¼ˆHeader.astroï¼‰ã€é¡µè„šï¼ˆFooter.astroï¼‰ç­‰ï¼Œç›´æ¥åœ¨å¸ƒå±€ç»„ä»¶ä¸­å¼•å…¥å³å¯ã€‚
3. å½“æˆ‘ä»¬å°†å…¨å±€æ ·å¼ï¼ˆå¦‚ normalize.cssã€animate.css ç­‰ï¼‰å¼•å…¥åˆ°å¸ƒå±€ç»„ä»¶ä¸­æ—¶ï¼Œè¿™äº›æ ·å¼ä¼šåº”ç”¨åˆ°å½“å‰æ‰€æœ‰é¡µé¢ä¸­ã€‚
4. å¯ä»¥ç†è§£ä¸ºå¸ƒå±€ç»„ä»¶æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼Œå®ƒå®šä¹‰äº†é¡µé¢çš„é€šç”¨ç»“æ„å’Œæ ·å¼ï¼Œè€Œå…·ä½“çš„é¡µé¢å†…å®¹åˆ™ç”±æ’æ§½ï¼ˆ<slot />ï¼‰æ¥å¡«å……ã€‚
5. æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å°†å†…å®¹å†™åœ¨Layoutç»„ä»¶ä¸­ï¼Œä¾‹å¦‚å°†PostListç»„ä»¶å†™åœ¨Layoutç»„ä»¶ä¸­ï¼Œå®ƒå°†ä¼šè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™Layoutç»„ä»¶çš„æ’æ§½ï¼ˆ<slot />ï¼‰ï¼Œéšåè¢«ç»Ÿä¸€æ¸²æŸ“å‡ºæ¥ã€‚

```astro
---
import Layout from '../layouts/Layout.astro';
---
<Layout>
      <PostList posts={paginatedPosts} />
</Layout>
```

### å…±äº«ç»„ä»¶

> åœ¨ Astro ä¸­ï¼Œ`Layouts` ç›®å½•ï¼ˆé€šå¸¸æ˜¯ src/layoutsï¼‰æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥å­˜æ”¾å¸ƒå±€ç»„ä»¶çš„ç›®å½•ã€‚å¸ƒå±€ç»„ä»¶æ˜¯ Astro ä¸­ä¸€ç§ç‰¹æ®Šçš„ç»„ä»¶ï¼Œå®ƒä»¬å®šä¹‰äº†ä½ çš„ç½‘ç«™é¡µé¢çš„é€šç”¨ç»“æ„å’Œæ ·å¼ï¼Œæ¯”å¦‚ HTML ç»“æ„ã€å¤´éƒ¨ã€å°¾éƒ¨ã€å¯¼èˆªæ ç­‰ç­‰ã€‚

### Layouts ç›®å½•çš„ä½œç”¨å’Œæ„ä¹‰ï¼š

1. ç»Ÿä¸€é¡µé¢ç»“æ„ï¼š Layouts ç›®å½•å…è®¸ä½ å°†ç½‘ç«™çš„é€šç”¨é¡µé¢ç»“æ„å®šä¹‰åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªå¸ƒå±€ç»„ä»¶ä¸­ã€‚ è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨å¤šä¸ªé¡µé¢ä¸­é‡å¤ä½¿ç”¨è¿™äº›å¸ƒå±€ï¼Œè€Œæ— éœ€åœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½ç¼–å†™ç›¸åŒçš„ HTML ç»“æ„ã€‚
2. ä»£ç å¤ç”¨ï¼š  é€šè¿‡ä½¿ç”¨å¸ƒå±€ç»„ä»¶ï¼Œä½ å¯ä»¥é¿å…ä»£ç é‡å¤ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ å¦‚æœä½ éœ€è¦ä¿®æ”¹ç½‘ç«™çš„æ•´ä½“ç»“æ„ï¼Œåªéœ€è¦ä¿®æ”¹ç›¸åº”çš„å¸ƒå±€ç»„ä»¶ï¼Œæ‰€æœ‰ä½¿ç”¨è¯¥å¸ƒå±€çš„é¡µé¢éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚

3. ç®€åŒ–é¡µé¢å¼€å‘ï¼š  å¸ƒå±€ç»„ä»¶å¯ä»¥è®©ä½ ä¸“æ³¨äºç¼–å†™é¡µé¢çš„æ ¸å¿ƒå†…å®¹ï¼Œè€Œä¸ç”¨å…³å¿ƒé¡µé¢çš„é€šç”¨ç»“æ„ã€‚ è¿™å¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚

4. SEO å‹å¥½ï¼š  é€šè¿‡åœ¨å¸ƒå±€ç»„ä»¶ä¸­è®¾ç½®ç»Ÿä¸€çš„ HTML ç»“æ„ã€meta æ ‡ç­¾å’Œå…¶ä»– SEO ç›¸å…³çš„è®¾ç½®ï¼Œä½ å¯ä»¥ç¡®ä¿ç½‘ç«™çš„æ¯ä¸ªé¡µé¢éƒ½ç¬¦åˆ SEO çš„æœ€ä½³å®è·µã€‚

### å¸ƒå±€ç»„ä»¶çš„ç‰¹ç‚¹ï¼š

åŒ…å«`<slot />`ï¼š å¸ƒå±€ç»„ä»¶é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª <slot /> æ ‡ç­¾ã€‚ <slot /> æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œç”¨äºæŒ‡å®šåº”è¯¥åœ¨å“ªé‡Œæ¸²æŸ“é¡µé¢ä¸­çš„å†…å®¹ã€‚
å¯ä»¥æ¥æ”¶ Propsï¼š å¸ƒå±€ç»„ä»¶å¯ä»¥æ¥æ”¶ Propsï¼ˆå±æ€§ï¼‰ï¼Œå…è®¸ä½ æ ¹æ®ä¸åŒçš„é¡µé¢ä¼ é€’ä¸åŒçš„æ•°æ®ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨å¸ƒå±€ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ª title Propï¼Œç”¨äºè®¾ç½®é¡µé¢çš„æ ‡é¢˜ã€‚

Layouts ç›®å½•çš„å¸¸è§ç”¨æ³•ï¼š

 - å®šä¹‰ç½‘ç«™çš„é€šç”¨ç»“æ„ï¼š åœ¨ Layouts ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª BaseLayout.astro ç»„ä»¶ï¼Œå®šä¹‰ç½‘ç«™çš„é€šç”¨ HTML ç»“æ„ã€å¤´éƒ¨ã€å°¾éƒ¨å’Œå¯¼èˆªæ ã€‚
åˆ›å»ºä¸åŒçš„é¡µé¢å¸ƒå±€ï¼š å¦‚æœä½ éœ€è¦ä¸åŒçš„é¡µé¢å¸ƒå±€ (ä¾‹å¦‚ï¼Œåšå®¢æ–‡ç« é¡µé¢å’Œæ™®é€šé¡µé¢)ï¼Œå¯ä»¥åœ¨ Layouts ç›®å½•ä¸­åˆ›å»ºå¤šä¸ªä¸åŒçš„å¸ƒå±€ç»„ä»¶ã€‚
åµŒå¥—å¸ƒå±€ï¼š ä½ å¯ä»¥å°†å¸ƒå±€ç»„ä»¶åµŒå¥—åœ¨ä¸€èµ·ï¼Œæ„å»ºæ›´å¤æ‚çš„é¡µé¢ç»“æ„ã€‚
ç®€å•ç¤ºä¾‹ï¼š

### å…±äº«htmlæ ¼å¼

1. åˆ›å»ºä¸€ä¸ªLayout.astroç»„ä»¶

```astro title="components/Layout.astro"
---
import { SiteConfig} from '../config';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
const { title, favicon } = SiteConfig;
const { pagetitle, children } = Astro.props;

import '../styles/golbal.css';
import '../styles/markdown.css'; 
import 'animate.css';

const pageTitle = pagetitle || title;
---

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{pageTitle}</title>
    <link rel="icon" type="image/svg+xml" href={favicon} />
  </head>
  <body>
    <!-- å…±äº«çš„Headerç»„ä»¶ -->
    <Header />
    <slot />
    <!-- å…±äº«çš„Footerç»„ä»¶ -->
    <Footer />
  </body>
</html>
```

2. è¿™å…¶å®å°±æ˜¯ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œåªæ˜¯åœ¨å…¶ä¸­æ·»åŠ äº†ä¸€ä¸ª<slot />æ ‡ç­¾ã€‚
3. <slot /> æ˜¯ Web ç»„ä»¶ï¼ˆåŒ…æ‹¬ Astro ç»„ä»¶ï¼‰ä¸­çš„ä¸€ä¸ªå ä½ç¬¦ï¼Œå®ƒå®šä¹‰äº†çˆ¶ç»„ä»¶åº”è¯¥åœ¨å“ªé‡Œæ¸²æŸ“ä¼ é€’ç»™å­ç»„ä»¶çš„å†…å®¹ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œæ’æ§½â€æˆ–è€…â€œç©ºä½â€ï¼Œçˆ¶ç»„ä»¶å¯ä»¥å°†å†…å®¹â€œæ’å…¥â€åˆ°è¿™ä¸ªä½ç½®ã€‚
4. ç°åœ¨åªéœ€è¦å°†layout.astroç»„ä»¶å¼•å…¥åˆ°éœ€è¦ä½¿ç”¨å¸ƒå±€çš„é¡µé¢ä¸­å³å¯ã€‚
5. ä¾‹å¦‚ï¼šåœ¨`src/pages/index.astro`ä¸­å¼•å…¥å¸ƒå±€ç»„ä»¶

```astro
---
import Layout from '../layouts/Layout.astro';
...
---
<Layout>
    <Header />
    <div class="article-container">
      <PostList posts={processedPosts} />
    </div>
</Layout>
```
6. è¿™æ ·ï¼Œå¯¼èˆªæ å’Œæ–‡ç« åˆ—è¡¨å°±ä¼šè¢«æ¸²æŸ“åˆ°Layoutå¸ƒå±€ç»„ä»¶ä¸­åœ¨ï¼Œè¿™å°±ç›¸å½“äºå®ƒä»¬éƒ½å…±äº«äº†Layoutå¸ƒå±€ç»„ä»¶çš„ç»“æ„ã€‚

### å…±äº«å¸ƒå±€

#### æ–°å»ºä¸€ä¸ªcomponents/Container.astroç»„ä»¶

1. è¿™å°†ä½œä¸ºä¸€ä¸ªç»Ÿä¸€å¸ƒå±€ï¼Œæ‰€æœ‰é¡µé¢éƒ½å°†ä½¿ç”¨è¿™ä¸ªå¸ƒå±€ã€‚

```astro title="components/Container.astro"
---
// Containerç»„ä»¶ï¼Œç”¨äºç»Ÿä¸€åŒ…è£…é¡µé¢å†…å®¹
---
<div class="container">
    <slot />
</div>
```

2. ä¾‹å¦‚ï¼šåœ¨`src/pages/index.astro`ä¸­å¼•å…¥å¸ƒå±€ç»„ä»¶ï¼Œå¯¼èˆªæ å’Œæ–‡ç« åˆ—è¡¨éƒ½å°†è¢«æ¸²æŸ“åˆ°Containerç»„ä»¶ä¸­ï¼Œè¿™æ ·å°±å®ç°äº†å¸ƒå±€çš„å…±äº«ä»¥è¾¾åˆ°å¸ƒå±€æ ·å¼çš„ç»Ÿä¸€ã€‚
3. ä¸ä»…å¦‚æ­¤è¿™ä¹Ÿé™ä½äº†ä»£ç çš„é‡å¤åº¦ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚

```astro
---
import Layout from '../layouts/Layout.astro';
import Container from '../components/Container.astro';
...
---
<Layout>
    <Container>
        <Header />
        <div class="article-container">
          <PostList posts={processedPosts} />
        </div>
    </Container>
</Layout>
```

2. 
## å­—æ•°ç»Ÿè®¡

1. ä»£ç æ¥æºäº`Astro-Pure`ä¸»é¢˜

2. ä¿ç•™äº† CJK æ”¯æŒ: ä»£ç åŒ…å«äº† CJK_RANGESã€CJK_PUNCTUATION å’Œ isCJK å‡½æ•°ï¼Œç”¨äºæ­£ç¡®å¤„ç†ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å­—ç¬¦ã€‚  è¿™éƒ¨åˆ†ä»£ç ç›´æ¥ä»ä½ æä¾›çš„ reading-time.ts å¤åˆ¶è¿‡æ¥ï¼Œä¿è¯äº†å¯¹ CJK å­—ç¬¦çš„å‡†ç¡®è®¡æ•°ã€‚

3. æ”¹è¿›çš„å•è¯è¯†åˆ«:  ä½¿ç”¨ /\S/.test(char) æ¥åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯â€œéç©ºç™½å­—ç¬¦â€ã€‚  \S æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚ è¿™ç§æ–¹å¼å¯ä»¥æ›´å‡†ç¡®åœ°è¯†åˆ«è‹±æ–‡å•è¯ã€‚ inWord å˜é‡ç”¨æ¥è·Ÿè¸ªæ˜¯å¦æ­£åœ¨ä¸€ä¸ªå•è¯å†…éƒ¨ï¼Œé¿å…é‡å¤è®¡æ•°ã€‚

4. æ›´ç®€æ´çš„å®ç°: ç›´æ¥åœ¨ readingTime å‡½æ•°ä¸­å®ç°å­—æ•°ç»Ÿè®¡é€»è¾‘ï¼Œè€Œä¸å†ä¾èµ– remark å’Œ strip-markdownã€‚ è™½ç„¶ç‰ºç‰²äº†ä¸€éƒ¨åˆ†ç²¾åº¦ï¼ˆæ— æ³•å®Œç¾å»é™¤ markdown æ ‡è®°çš„å½±å“ï¼Œä¾‹å¦‚é“¾æ¥ï¼‰ï¼Œä½†æ˜¯å¯ä»¥é¿å…å¼•å…¥é¢å¤–çš„ä¾èµ–ï¼Œå¹¶ä¸”å¯¹äºå¤§å¤šæ•°æƒ…å†µæ¥è¯´ï¼Œç²¾åº¦å·²ç»è¶³å¤Ÿã€‚

5. å»é™¤äº†ä¸å¿…è¦çš„ä»£ç : åˆ é™¤äº†åŸ reading-time.ts ä¸­çš„ time å’Œ text å±æ€§çš„è®¡ç®—ï¼Œå› ä¸ºä½ çš„æ¥å£ ReadingTimeResults ä¸­åªéœ€è¦ minutes å’Œ wordsã€‚
```ts
import { readingTime } from './utils/Wordcount';

async function main() {
  const markdownContent = `
  # Hello World

  This is a paragraph with some **bold** and *italic* text.  ä½ å¥½ä¸–ç•Œã€‚

  - List item 1
  - List item 2

  \`\`\`javascript
  console.log("Hello from a code block!");
  \`\`\`
  `;

  const readingTimeResult = await readingTime(markdownContent);
  console.log(`Reading Time: ${readingTimeResult.minutes} minutes`);
  console.log(`Word Count: ${readingTimeResult.words} words`);
}

main();
```

6. å°†wordCountå¯¼å…¥åˆ°è·å–æ–‡ç« æ•°æ®çš„é¡µé¢`(index.astro)`ä¸­


```astro
---
import Header from '../components/Header.astro';
import { getCollection } from 'astro:content';
import PostList from '../components/Postlist.astro';
+ import { readingTime } from '../utils/Wordcount';
import './styles/golbal.css';
import './styles/markdown.css'; 
import 'animate.css';

```

## ä»£ç å—é…è‰²ä¸åŠŸèƒ½

æ–‡ç« ä¸­çš„ä»£ç å—ä½¿ç”¨çš„æ˜¯expressive-codeæ’ä»¶ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ä»£ç å—æ ·å¼å’ŒåŠŸèƒ½ï¼Œæ¯”å¦‚è¯­æ³•é«˜äº®ã€è¡Œå·æ˜¾ç¤ºã€å¤åˆ¶æŒ‰é’®ç­‰ã€‚

1. ä¸ºAstroå®‰è£…[expressive-code](https://expressive-code.com/)æ’ä»¶

```bash
npm astro add astro-expressive-code
```
2. åœ¨`astro.config.mjs`ä¸­å¼•å…¥expressive-codeæ’ä»¶ã€‚

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import expressiveCode from 'astro-expressive-code';

export default defineConfig({
  integrations: [
    expressiveCode({
      // é…ç½®é€‰é¡¹
    }),
  ],
});
```
3. è¿™æ ·ï¼Œæ‰€æœ‰çš„ä»£ç å—å°±ä¼šè‡ªåŠ¨åº”ç”¨expressive-codeæ’ä»¶çš„æ ·å¼å’ŒåŠŸèƒ½ã€‚
4. å¦å¤–ï¼Œå¦‚æœåªæ˜¯å®‰è£…äº†expressive-codeè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œå®ƒæ²¡æ³•æ˜¾ç¤ºè¡Œå·ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–å®‰è£…`@expressive-code/plugin-line-numbers`æ’ä»¶ã€‚
5. expressive-codeè¿˜æä¾›äº†å¾ˆå¤šä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜ç½‘é€‰æ‹©ä¸€ä¸ªå–œæ¬¢çš„ä¸»é¢˜ï¼Œç„¶ååœ¨`astro.config.mjs`ä¸­é…ç½®expressive-codeæ’ä»¶ï¼Œæ·»åŠ `theme`é€‰é¡¹ã€‚
```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import expressiveCode from 'astro-expressive-code';

export default defineConfig({
  integrations: [
    expressiveCode({
      theme: 'github-dark',
      plugins: [pluginLineNumbers(),],
    }),
  ],
});
```

```bash
npm i @expressive-code/plugin-line-numbers
```
5. å®‰è£…å®Œæˆåï¼Œåœ¨`astro.config.mjs`ä¸­é…ç½®expressive-codeæ’ä»¶ï¼Œæ·»åŠ `lineNumbers`æ’ä»¶ã€‚


```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import expressiveCode from 'astro-expressive-code';
import lineNumbers from '@expressive-code/plugin-line-numbers';

export default defineConfig({
  integrations: [
    expressiveCode({
      plugins: [lineNumbers],
    }),
  ],
});
```
6. è¿™æ ·ï¼Œæ‰€æœ‰çš„ä»£ç å—å°±ä¼šè‡ªåŠ¨æ˜¾ç¤ºè¡Œå·äº†ã€‚



## ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½

> Astroæ’ä»¶ï¼šastro-theme-toggle
>è½»æ¾ä¸ºä½ çš„ Astro é¡¹ç›®æ·»åŠ ä¸€ä¸ªæ¶Ÿæ¼ªé£æ ¼çš„ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ã€‚

1. è¿™æ˜¯ Astro ç”Ÿæ€ä¸­ä¸“é—¨ç”¨äºä¸»é¢˜åˆ‡æ¢çš„è½»é‡æ’ä»¶ï¼Œå®ƒèƒ½å¤Ÿè½»æ¾ä¸ºä½ çš„ Astro é¡¹ç›®æ·»åŠ ä¸€ä¸ªæ¶Ÿæ¼ªé£æ ¼çš„ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ã€‚åŸºäº Web APIï¼ˆmatchMedia + localStorageï¼‰å®ç°ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸»é¢˜ã€æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·é€‰æ‹©ï¼Œä¸”é›†æˆç®€å•ã€‚

2. å®‰è£…æ’ä»¶
```bash
npm install astro-theme-toggle
```

3. å¼•å…¥æ’ä»¶åªéœ€å°†å¯¼å…¥ThemeScriptå’ŒToggleç»„ä»¶ï¼Œå¹¶æ’å…¥åˆ°Layoutå¸ƒå±€ç»„ä»¶ä¸­å³å¯ä½¿ç”¨ã€‚
```js title="components/Layout.astro"
---
---
import { ThemeScript } from "astro-theme-toggle/components";
import { Toggle } from "astro-theme-toggle/components";
---

<div class="header-container">
    <header class="header">
        <a href="/" class="logo"><h1>MangoCat</h1></a>
        <ThemeScript />
        <Toggle class="theme-toggle" style={{ width: "18px", height: "18px" }} />
    </header>
</div>
```
4. è¯¥æ’ä»¶ç”šè‡³ä¸ç”¨é…ç½®å›¾æ ‡ï¼Œè‡ªå¸¦ä¸¤ä¸ªæ˜æš—å›¾æ ‡ï¼Œå¦å¤–å®ƒç¼ºå°‘ä¸€ä¸ªè·Ÿéšç³»ç»Ÿä¸»é¢˜çš„åŠŸèƒ½ï¼Œä¸è¿‡è¿™ä¹Ÿä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºç³»ç»Ÿä¸»é¢˜åˆ‡æ¢æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ã€‚

## è¿‡æ¸¡åŠ¨ç”»

1. ä½¿ç”¨çš„æ˜¯CSSç¼–å†™çš„åŸç”Ÿè¿‡æ¸¡åŠ¨ç”»ã€‚
2. åœ¨`src/styles/global.css`ä¸­å®šä¹‰äº†`slide-in`åŠ¨ç”»ï¼Œè¯¥åŠ¨ç”»å¯ä»¥é€‚é…ç»™æ‰€æœ‰éœ€è¦æ»‘åŠ¨å…¥æ•ˆæœçš„å…ƒç´ ï¼Œæ¯”å¦‚æ–‡ç« åˆ—è¡¨ã€æ–‡ç« ã€å‹é“¾ç­‰ã€‚
3. ä½¿ç”¨æ–¹æ³•ï¼šåªéœ€ä¸ºéœ€è¦æ·»åŠ æ»‘åŠ¨å…¥æ•ˆæœçš„å…ƒç´ æ·»åŠ `animate-slide-in`ç±»å³å¯ã€‚
```css
/* å®šä¹‰slide-inåŠ¨ç”» */
@keyframes slide-in {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* åº”ç”¨slide-inåŠ¨ç”»çš„ç±» */
.animate-slide-in {
    animation: slide-in 0.3s ease-out forwards;
    opacity: 0;
    /* åˆå§‹çŠ¶æ€ä¸ºé€æ˜ */
}
```
4. ä¾‹å¦‚ï¼Œä¸ºæ–‡ç« å†…å®¹æ·»åŠ æ»‘åŠ¨å…¥æ•ˆæœï¼š

```astro
<!-- ä¸ºæ–‡ç« å†…å®¹æ·»åŠ åŠ¨ç”» -->
<div class="article-content animate-slide-in">
	 <Content/>
</div>
```


## è¯„è®ºç³»ç»Ÿ
1. è¯„è®ºç³»ç»Ÿä½¿ç”¨çš„æ˜¯Twikooï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºäº‘å‡½æ•°çš„è¯„è®ºç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å‰ç«¯æ¡†æ¶ï¼Œæ¯”å¦‚Vueã€Reactç­‰ã€‚
2. æå‰é…ç½®å¥½Twikooçš„ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬ç¯å¢ƒIDã€åŒºåŸŸã€æ•°æ®åº“ç­‰...
3. æˆ‘ä»¬åœ¨`src/components/Comment.astro`ä¸­å¼•å…¥Twikooç»„ä»¶ï¼Œé…ç½®å¥½ç¯å¢ƒå˜é‡ï¼Œå³å¯åœ¨åšå®¢æ–‡ç« ä¸­æ·»åŠ è¯„è®ºåŠŸèƒ½ã€‚

```astro
---
import { CommentConfig } from '../config';

const envId = CommentConfig.twikoo.envId;
const path = CommentConfig.twikoo.path;
---

<div class="mt-8">
  <h2 class="mb-4 text-lg font-medium text-[var(--title-color)] dark:text-[var(--title-color)]">è¯„è®º</h2>
  <div 
    id="tcomment" 
    class="twikoo-container rounded-lg border-zinc-200 p-4 dark:border-zinc-700"
    data-env-id={envId}
    data-path={path || 'auto'}
  >
    <div class="flex items-center justify-center py-8 text-zinc-500 dark:text-zinc-400">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mr-2"></div>
      æ­£åœ¨åŠ è½½è¯„è®º...
    </div>
  </div>
</div>

<!-- ä½¿ç”¨ defer å±æ€§å»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿ DOM å°±ç»ª -->
<script 
  src="https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js"
  defer
></script>

<!-- å†…è”è„šæœ¬å¤„ç†åˆå§‹åŒ– -->
<script is:inline>
  // å…¨å±€å˜é‡å­˜å‚¨é‡è¯•æ¬¡æ•°
  window.twikooRetryCount = 0;
  window.maxRetries = 20; // æœ€å¤§é‡è¯•æ¬¡æ•°

  function waitForTwikoo(callback, retryCount = 0) {
    if (typeof window.twikoo !== 'undefined') {
      callback();
    } else if (retryCount < window.maxRetries) {
      setTimeout(() => waitForTwikoo(callback, retryCount + 1), 200);
    } else {
      console.error('Twikoo failed to load after maximum retries');
      showErrorMessage();
    }
  }

  function showErrorMessage() {
    const containers = document.querySelectorAll('#tcomment');
    containers.forEach(container => {
      if (container) {
        container.innerHTML = `
          <div class="text-center py-8 text-red-500">
            <p>è¯„è®ºç³»ç»ŸåŠ è½½å¤±è´¥</p>
            <button onclick="location.reload()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm">
              é‡æ–°åŠ è½½
            </button>
          </div>
        `;
      }
    });
  }

  function initializeTwikoo() {
    const container = document.getElementById('tcomment');
    
    if (!container) {
      console.warn('Twikoo container (#tcomment) not found');
      return;
    }

    const envId = container.getAttribute('data-env-id');
    const path = container.getAttribute('data-path');
    
    if (!envId) {
      console.error('Twikoo envId not provided');
      container.innerHTML = '<div class="text-center py-8 text-red-500">è¯„è®ºç³»ç»Ÿé…ç½®é”™è¯¯</div>';
      return;
    }

    try {
      // æ¸…ç†å®¹å™¨
      container.innerHTML = '';
      
      // åˆå§‹åŒ– Twikoo
      window.twikoo.init({
        envId: envId,
        el: '#tcomment',
        path: path === 'auto' ? location.pathname : path,
        lang: 'zh-CN'
      });
      
      console.log('Twikoo initialized successfully');
    } catch (error) {
      console.error('Failed to initialize Twikoo:', error);
      container.innerHTML = `
        <div class="text-center py-8 text-red-500">
          <p>è¯„è®ºç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥</p>
          <p class="text-sm mt-1">${error.message}</p>
          <button onclick="location.reload()" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm">
            é‡æ–°åŠ è½½
          </button>
        </div>
      `;
    }
  }

  function handlePageInit() {
    // é‡ç½®é‡è¯•è®¡æ•°
    window.twikooRetryCount = 0;
    
    // ç­‰å¾… Twikoo è„šæœ¬åŠ è½½å®Œæˆååˆå§‹åŒ–
    waitForTwikoo(initializeTwikoo);
  }

  // é¦–æ¬¡åŠ è½½å¤„ç†
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', handlePageInit);
  } else {
    // DOM å·²ç»å‡†å¤‡å°±ç»ªï¼Œå»¶è¿Ÿä¸€ç‚¹æ‰§è¡Œä»¥ç¡®ä¿æ‰€æœ‰è„šæœ¬éƒ½åŠ è½½å®Œæˆ
    setTimeout(handlePageInit, 100);
  }

  // Astro ViewTransitions æ”¯æŒ
  document.addEventListener('astro:after-swap', () => {
    console.log('Page swapped, reinitializing Twikoo');
    setTimeout(handlePageInit, 150);
  });

  // é¡µé¢å¯è§æ€§å˜åŒ–å¤„ç†ï¼ˆå¯é€‰ï¼‰
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden) {
      const container = document.getElementById('tcomment');
      if (container && container.children.length === 0) {
        console.log('Page became visible, checking Twikoo');
        setTimeout(handlePageInit, 100);
      }
    }
  });
</script>

<style is:global>
  .twikoo-container {
    font-family: inherit;
    min-height: 200px;
  }
  
  .dark .twikoo-container {
    background-color: transparent;
  }
  
  /* è¾“å…¥æ¡†æ ·å¼ */
  .dark .tk-content textarea,
  .dark .tk-input input {
    background-color: rgb(39 39 42) !important;
    border-color: rgb(63 63 70) !important;
    color: rgb(228 228 231) !important;
  }
  
  .dark .tk-content textarea:focus,
  .dark .tk-input input:focus {
    border-color: rgb(96 165 250) !important;
  }
  
  /* æŒ‰é’®æ ·å¼ */
  .dark .tk-submit {
    border-color: rgb(63 63 70) !important;
    color: rgb(228 228 231) !important;
  }
  

  
  /* è¯„è®ºåŒºåŸŸæ ·å¼ */
  .dark .tk-comment,
  .dark .tk-replies-wrap {
    background-color: transparent !important;
    border-color: rgb(63 63 70) !important;
  }
  
  .dark .tk-comment .tk-main {
    color: rgb(228 228 231) !important;
  }
  
  .dark .tk-comment .tk-meta span {
    color: rgb(161 161 170) !important;
  }
  
  /* é“¾æ¥æ ·å¼ */
  .dark .tk-comment a {
    color: rgb(96 165 250) !important;
  }
  
  .dark .tk-comment a:hover {
    color: rgb(147 197 253) !important;
  }
  
  /* è¡¨æƒ…åŒ…å®¹å™¨ */
  .dark .tk-owo-container {
    background-color: rgb(39 39 42) !important;
    border-color: rgb(63 63 70) !important;
  }
  
  /* æ ‡ç­¾å’Œé¢å¤–ä¿¡æ¯ */
  .dark .tk-tag,
  .dark .tk-extras {
    color: rgb(161 161 170) !important;
  }
  
  /* å­—ä½“å’Œè¾¹æ¡†åœ†è§’ */
  .tk-comment,
  .tk-content,
  .tk-input {
    font-family: 'Geist', system-ui, sans-serif !important;
  }
  
  .tk-content textarea,
  .tk-input input,
  .tk-submit,
  .tk-comment,
  .tk-owo-container {
    border-radius: 0.5rem !important;
  }
  
  .tk-comment {
    margin-bottom: 1rem !important;
  }
  
  /* åŠ è½½çŠ¶æ€ */
  .dark .tk-loading {
    color: rgb(161 161 170) !important;
  }
  
  /* åŠ è½½åŠ¨ç”» */
  .animate-spin {
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
</style>
```

## åšå®¢å®Œæ•´å®ç°åŸç†

### æ¶æ„è®¾è®¡ä¸æ ¸å¿ƒæŠ€æœ¯

æœ¬åšå®¢ä¸»é¢˜åŸºäºAstroæ¡†æ¶æ„å»ºï¼Œé‡‡ç”¨äº†ç°ä»£åŒ–çš„é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰æ¶æ„ã€‚Astroçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ç»„ä»¶ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨å¤šç§å‰ç«¯æ¡†æ¶ï¼ˆReactã€Vueç­‰ï¼‰æˆ–ç›´æ¥ä½¿ç”¨åŸç”ŸHTMLã€CSSå’ŒJavaScriptã€‚

#### 1.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **Astro**ï¼šé™æ€ç«™ç‚¹ç”Ÿæˆæ¡†æ¶ï¼Œè´Ÿè´£é¡µé¢æ¸²æŸ“å’Œæ„å»º
- **TypeScript**ï¼šæä¾›ç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
- **Markdown**ï¼šåšå®¢å†…å®¹çš„ç¼–å†™æ ¼å¼
- **CSS**ï¼šæ ·å¼è®¾è®¡ï¼Œæ”¯æŒå“åº”å¼å¸ƒå±€
- **Astro Icon**ï¼šå›¾æ ‡ç³»ç»Ÿï¼Œæ”¯æŒMaterial Symbolså’Œå…¶ä»–å›¾æ ‡åº“
- **astro-theme-toggle**ï¼šä¸»é¢˜åˆ‡æ¢æ’ä»¶ï¼Œå®ç°æ˜æš—æ¨¡å¼

### é¡¹ç›®ç»“æ„

```file
src/
â”œâ”€â”€ content/          # åšå®¢æ–‡ç« å’Œå†…å®¹æ–‡ä»¶
â”‚   â”œâ”€â”€ posts/        # Markdownæ ¼å¼çš„åšå®¢æ–‡ç« 
â”‚   â”œâ”€â”€ about.md      # å…³äºé¡µé¢å†…å®¹
â”‚   â”œâ”€â”€ link.md       # å‹é“¾é¡µé¢å†…å®¹
â”‚   â””â”€â”€ config.ts     # å†…å®¹é…ç½®
â”œâ”€â”€ layouts/          # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ Layout.astro  # ä¸»å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ components/       # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Header.astro  # å¯¼èˆªæ ç»„ä»¶
â”‚   â”œâ”€â”€ Footer.astro  # é¡µè„šç»„ä»¶
â”‚   â”œâ”€â”€ Postlist.astro # æ–‡ç« åˆ—è¡¨ç»„ä»¶
â”‚   â””â”€â”€ Container.astro # å†…å®¹å®¹å™¨ç»„ä»¶
â”œâ”€â”€ pages/            # é¡µé¢å…¥å£
â”‚   â”œâ”€â”€ index.astro   # é¦–é¡µ
â”‚   â”œâ”€â”€ about.astro   # å…³äºé¡µé¢
â”‚   â””â”€â”€ posts/        # æ–‡ç« è¯¦æƒ…é¡µ
â”œâ”€â”€ styles/           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ Readtime-Wordcount.ts # å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é—´è®¡ç®—
â”‚   â””â”€â”€ types.ts      # TypeScriptæ¥å£å®šä¹‰
â””â”€â”€ config.ts         # ç«™ç‚¹é…ç½®
```


### 2. é…ç½®ç³»ç»Ÿ

åšå®¢é‡‡ç”¨é›†ä¸­å¼é…ç½®ç®¡ç†ï¼Œé€šè¿‡`src/config.ts`æ–‡ä»¶ç»Ÿä¸€ç®¡ç†ç«™ç‚¹çš„å„é¡¹é…ç½®ï¼š

```typescript
// ç«™ç‚¹é…ç½®æ¥å£å®šä¹‰ (src/utils/types.ts)
export interface SiteConfigType {
  title: string;          // ç«™ç‚¹æ ‡é¢˜
  author: string;         // ä½œè€…åç§°
  favicon: string;        // ç½‘ç«™å›¾æ ‡
  desc: string;           // ç«™ç‚¹æè¿°
  siteUrl: string;        // ç«™ç‚¹URL
  PaginationConfig: {
    POSTS_PER_PAGE: number;  // æ¯é¡µæ–‡ç« æ•°é‡
  };
  Categories: {           // åˆ†ç±»é…ç½®
    [key: string]: CategoryConfig;
  };
  NavConfig: {            // å¯¼èˆªé…ç½®
    name: string;
    path: string;
  }[];
}
```

é…ç½®ç³»ç»Ÿçš„ä¼˜åŠ¿åœ¨äºï¼š
- é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤
- ç±»å‹å®‰å…¨ï¼Œé€šè¿‡TypeScriptæ¥å£ç¡®ä¿é…ç½®æ ¼å¼æ­£ç¡®
- ç»„ä»¶é—´å…±äº«ï¼Œé¿å…é‡å¤å®šä¹‰

### 3. å†…å®¹ç®¡ç†

åšå®¢ä½¿ç”¨Astroçš„Content CollectionsåŠŸèƒ½ç®¡ç†æ–‡ç« å†…å®¹ï¼Œæ‰€æœ‰åšå®¢æ–‡ç« å­˜å‚¨åœ¨`src/content/posts/`ç›®å½•ä¸‹ï¼Œé‡‡ç”¨Markdownæ ¼å¼ç¼–å†™ï¼ŒåŒ…å«YAMLå‰ç½®å…ƒæ•°æ®ï¼š

```markdown
---
title: ä»é›¶å¼€å‘ä¸€ä¸ªAstroåšå®¢ä¸»é¢˜
description: è¿™æ˜¯ä¸€ä¸ªä»é›¶å¼€å§‹å¼€å‘çš„Astroåšå®¢ä¸»é¢˜ï¼Œç”¨äºå±•ç¤ºæˆ‘çš„å­¦ä¹ ç¬”è®°å’ŒæŠ€æœ¯åˆ†äº«ã€‚
published: 2025-12-06 16:27:41
tags: [C++, æ•°æ®ç»“æ„]                               # æ·»åŠ åˆ†ç±»
category: å­¦ä¹ ç¬”è®° 
slug: "83x33k23"
---
```

### 4. é¡µé¢æ¸²æŸ“æµç¨‹

#### 4.1 é¦–é¡µæ¸²æŸ“

é¦–é¡µæ¸²æŸ“æµç¨‹ä¸»è¦åœ¨`src/pages/index.astro`ä¸­å®ç°ï¼š

1. **å¯¼å…¥ä¾èµ–**ï¼šå¯¼å…¥é…ç½®ã€å¸ƒå±€ç»„ä»¶ã€å†…å®¹é›†åˆå’Œå·¥å…·å‡½æ•°
2. **è·å–æ–‡ç« æ•°æ®**ï¼šä½¿ç”¨`getCollection('posts')`è·å–æ‰€æœ‰åšå®¢æ–‡ç« 
3. **è®¡ç®—å­—æ•°**ï¼šä½¿ç”¨`ReadingTime`å‡½æ•°è®¡ç®—æ¯ç¯‡æ–‡ç« çš„å­—æ•°
4. **æ’åºå’Œåˆ†é¡µ**ï¼šæŒ‰å‘å¸ƒæ—¶é—´æ’åºï¼Œå¹¶è¿›è¡Œåˆ†é¡µå¤„ç†
5. **æ¸²æŸ“é¡µé¢**ï¼šä½¿ç”¨`Layout`å’Œ`PostList`ç»„ä»¶æ¸²æŸ“é¡µé¢å†…å®¹

```typescript
// è¯»å–æ–‡ç« æ•°æ®
const posts = await getCollection('posts');

// è®¡ç®—æ¯ç¯‡æ–‡ç« çš„å­—æ•°
const processedPosts = await Promise.all(
  posts.map(async (post) => {
    const readingTimeResults = await ReadingTime(post.body);
    return {
      ...post,
      data: {
        ...post.data,
        wordCount: readingTimeResults.words, // æ·»åŠ  wordCount å­—æ®µ
      },
    };
  })
);

// æŒ‰å‘å¸ƒæ—¶é—´æ’åº
processedPosts.sort((a, b) => new Date(b.data.published).getTime() - new Date(a.data.published).getTime());
// åˆ†é¡µå¤„ç†
const paginatedPosts = processedPosts.slice(startIndex, startIndex + POSTS_PER_PAGE);
```

#### 4.2 æ–‡ç« åˆ—è¡¨æ¸²æŸ“

`PostList`ç»„ä»¶è´Ÿè´£æ¸²æŸ“æ–‡ç« åˆ—è¡¨ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
- æ ¼å¼åŒ–æ–‡ç« ä¿¡æ¯ï¼ˆæ ‡é¢˜ã€æè¿°ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰ï¼‰
- æ ¹æ®åˆ†ç±»é…ç½®æ˜¾ç¤ºä¸åŒçš„å›¾æ ‡å’Œé¢œè‰²
- æ ¼å¼åŒ–å­—æ•°ç»Ÿè®¡ï¼ˆå¦‚å°†1234å­—æ˜¾ç¤ºä¸º1.2kå­—ï¼‰
- æ˜¾ç¤ºå‘å¸ƒæ—¥æœŸ

### 5. æ ¸å¿ƒåŠŸèƒ½å®ç°

#### 5.1 å­—æ•°ç»Ÿè®¡ä¸é˜…è¯»æ—¶é—´

`Readtime-Wordcount.ts`å·¥å…·å®ç°äº†å‡†ç¡®çš„å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é—´è®¡ç®—ï¼Œç‰¹åˆ«æ”¯æŒCJKï¼ˆä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼‰å­—ç¬¦ï¼š

- ä½¿ç”¨å­—ç¬¦èŒƒå›´æ£€æŸ¥è¯†åˆ«CJKå­—ç¬¦
- è·³è¿‡CJKæ ‡ç‚¹ç¬¦å·ï¼Œé¿å…é‡å¤è®¡æ•°
- ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«è‹±æ–‡å•è¯
- æä¾›å¯é…ç½®çš„æ¯åˆ†é’Ÿé˜…è¯»å­—æ•°ï¼ˆé»˜è®¤200å­—/åˆ†é’Ÿï¼‰

```typescript
export async function ReadingTime(markdown: string = '', wordsPerMinute: number = 200): Promise<ReadingTimeResults> {
  let words = 0;
  let inWord = false;

  for (let i = 0; i < markdown.length; i++) {
    const char = markdown[i];
    if (isCJK(char)) {
      words++;
      // è·³è¿‡åç»­çš„CJKæ ‡ç‚¹ç¬¦å·
      while (i + 1 < markdown.length && CJK_PUNCTUATION.test(markdown[i + 1])) {
        i++;
      }
      inWord = false;
    } else if (/\S/.test(char)) {
      if (!inWord) {
        words++;
        inWord = true;
      }
    } else {
      inWord = false;
    }
  }

  const minutes = Math.ceil(words / wordsPerMinute);
  return { minutes, words };
}
```

#### 5.2 åˆ†ç±»ç³»ç»Ÿ

åšå®¢å®ç°äº†çµæ´»çš„åˆ†ç±»ç³»ç»Ÿï¼Œé€šè¿‡`config.ts`ä¸­çš„`Categories`é…ç½®å®šä¹‰ä¸åŒåˆ†ç±»çš„å›¾æ ‡å’Œé¢œè‰²ï¼š

```typescript
Categories: {
  'éšç¬”': { icon: 'material-symbols:edit-document-rounded', color: '#ec4f4fff' },
  'æ„Ÿè¨€': { icon: 'material-symbols:kid-star-outline', color: '#30afa7ff' },
  'æ—¥å¸¸': {icon: 'material-symbols:edit-note-rounded',color: '#c03f99ff'},
  'å­¦ä¹ ç¬”è®°': {icon: 'material-symbols:code-rounded', color: '#36bd41ff'}
}
```

åœ¨`PostList`ç»„ä»¶ä¸­ï¼Œé€šè¿‡`getCategoryConfig`å‡½æ•°è·å–åˆ†ç±»é…ç½®ï¼Œå¹¶æ ¹æ®é…ç½®æ˜¾ç¤ºç›¸åº”çš„å›¾æ ‡å’Œé¢œè‰²ã€‚

#### 5.3 å“åº”å¼è®¾è®¡

åšå®¢é‡‡ç”¨å“åº”å¼è®¾è®¡ï¼Œé€šè¿‡CSSåª’ä½“æŸ¥è¯¢é€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼š

- ç§»åŠ¨ç«¯ï¼šå•åˆ—å¸ƒå±€ï¼Œå¯¼èˆªæ æŠ˜å 
- å¹³æ¿å’Œæ¡Œé¢ç«¯ï¼šå¤šåˆ—å¸ƒå±€ï¼Œå®Œæ•´å¯¼èˆªæ 

```css
@media (max-width: 768px) {
  .footer {
    padding: 0 20px;
  }
  /* å…¶ä»–ç§»åŠ¨ç«¯æ ·å¼ */
}
```

#### 5.4 ä¸»é¢˜åˆ‡æ¢

ä½¿ç”¨`astro-theme-toggle`æ’ä»¶å®ç°æ˜æš—æ¨¡å¼åˆ‡æ¢ï¼š

- è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¸»é¢˜
- æ”¯æŒç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢
- æœ¬åœ°å­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½®
- å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»

```astro
<ThemeScript />
<Toggle class="theme-toggle" style={{ width: "30px", height: "30px" }} />
```

### 6. ç»„ä»¶åŒ–è®¾è®¡

åšå®¢é‡‡ç”¨ç»„ä»¶åŒ–è®¾è®¡ï¼Œå°†é¡µé¢æ‹†åˆ†ä¸ºå¤šä¸ªå¯å¤ç”¨ç»„ä»¶ï¼š

- **Layout.astro**ï¼šä¸»å¸ƒå±€ç»„ä»¶ï¼ŒåŒ…å«HTMLç»“æ„ã€å¤´éƒ¨å’Œå°¾éƒ¨
- **Header.astro**ï¼šå¯¼èˆªæ ç»„ä»¶ï¼ŒåŒ…å«ç«™ç‚¹æ ‡é¢˜å’Œå¯¼èˆªé“¾æ¥
- **Footer.astro**ï¼šé¡µè„šç»„ä»¶ï¼ŒåŒ…å«ç‰ˆæƒä¿¡æ¯å’Œç¤¾äº¤åª’ä½“é“¾æ¥
- **PostList.astro**ï¼šæ–‡ç« åˆ—è¡¨ç»„ä»¶ï¼Œæ¸²æŸ“æ–‡ç« å¡ç‰‡
- **Container.astro**ï¼šå†…å®¹å®¹å™¨ç»„ä»¶ï¼Œç»Ÿä¸€é¡µé¢å¸ƒå±€

ç»„ä»¶åŒ–è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼š
- ä»£ç å¤ç”¨ï¼Œå‡å°‘é‡å¤
- æ˜“äºç»´æŠ¤å’Œæ›´æ–°
- æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- æé«˜å¼€å‘æ•ˆç‡

### 7. æ€§èƒ½ä¼˜åŒ–

åšå®¢é€šè¿‡å¤šç§æ–¹å¼è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼š

- **é™æ€ç«™ç‚¹ç”Ÿæˆ**ï¼šæå‰ç”ŸæˆHTMLæ–‡ä»¶ï¼Œå‡å°‘å®¢æˆ·ç«¯æ¸²æŸ“
- **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨é€‚å½“å¤§å°çš„å›¾ç‰‡ï¼Œæ”¯æŒç°ä»£å›¾ç‰‡æ ¼å¼
- **ç»„ä»¶æ‡’åŠ è½½**ï¼šä»…åœ¨éœ€è¦æ—¶åŠ è½½ç»„ä»¶
- **ä»£ç åˆ†å‰²**ï¼šå°†ä»£ç åˆ†æˆå°å—ï¼ŒæŒ‰éœ€åŠ è½½
- **CSSä¼˜åŒ–**ï¼šä½¿ç”¨CSSå˜é‡ï¼Œå‡å°‘é‡å¤æ ·å¼

