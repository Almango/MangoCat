<div class="header-container">
    <header class="header">
        <a href="/" class="logo"><h1>MangoCat</h1></a>
        <nav>
            <ul class="nav-links">
                <li><a href="#">å‹é“¾</a></li>
                <li><a href="#">å…³äº</a></li>
                <li><a href="#">å½’æ¡£</a></li>
            </ul>
        </nav>
        <button class="theme-toggle" id="theme-toggle">
            <span id="theme-icon">â˜€ï¸</span>
        </button>

        <script>
        // ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½çš„å†…è”å®ç°
        // å®šä¹‰ä¸»é¢˜ç±»å‹
        const Theme = {
            LIGHT: 'light',
            DARK: 'dark',
            SYSTEM: 'system'
        };

        // è·å–ä¸»é¢˜è®¾ç½®
        const getTheme = () => {
            return localStorage.getItem('theme') || Theme.SYSTEM;
        };

        // è·å–å®é™…çš„ä¸»é¢˜å€¼
        const getActualTheme = () => {
            const theme = getTheme();
            if (theme === Theme.SYSTEM) {
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? Theme.DARK : Theme.LIGHT;
            }
            return theme;
        };

        // è®¾ç½®ä¸»é¢˜
        const setTheme = (theme: string) => {
            localStorage.setItem('theme', theme);
            updateThemeClass();
        };

        // åˆ‡æ¢ä¸»é¢˜
        const toggleTheme = () => {
            const currentTheme = getTheme();
            let newTheme;
            if (currentTheme === Theme.LIGHT) {
                newTheme = Theme.DARK;
            } else if (currentTheme === Theme.DARK) {
                newTheme = Theme.SYSTEM;
            } else {
                newTheme = Theme.LIGHT;
            }
            setTheme(newTheme);
            updateThemeIcon();
        };

        // æ›´æ–°æ–‡æ¡£çš„ç±»å
        const updateThemeClass = () => {
            const actualTheme = getActualTheme();
            const htmlElement = document.documentElement;
            htmlElement.classList.remove(Theme.LIGHT, Theme.DARK);
            htmlElement.classList.add(actualTheme);
        };

        // æ›´æ–°ä¸»é¢˜å›¾æ ‡
        const updateThemeIcon = () => {
            const theme = getTheme();
            const themeIcon = document.getElementById('theme-icon');
            switch (theme) {
                case Theme.LIGHT:
                    if (themeIcon) themeIcon.textContent = 'â˜€ï¸';
                    break;
                case Theme.DARK:
                    if (themeIcon) themeIcon.textContent = 'ğŸŒ™';
                    break;
                case Theme.SYSTEM:
                    if (themeIcon) themeIcon.textContent = 'ğŸ–¥ï¸';
                    break;
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹æ›´æ–°å›¾æ ‡
            updateThemeIcon();
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬
            const themeToggle = document.getElementById('theme-toggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', toggleTheme);
                }
        });
        </script>
    </header>
</div>