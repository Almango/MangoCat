---
// PostList 组件，用于展示文章列表

// 接收 posts 作为 props
const { posts } = Astro.props;

function formatWordCount(count: number): string {
    if (count >= 1000) {
        return (count / 1000).toFixed(1) + "k";
    }
    return count.toString();
}
---

{
    posts.map((post: any) => (
        <a href={`/posts/${post.slug}`}class="post-card animate__animated animate__fadeInUp animate__delay-100ms">
            <div class="post-content">
                <div class="post-title">
                    <h2>{post.data.title}</h2>
                </div>
                <div class="post-desc">
                    <p>{post.data.description}</p>
                </div>
                <div class="post-info">
                    <span class="category">{post.data.category}</span>
                    {post.data.tags.map((tag: string, index: number) => (
                        <span class="tag">{tag}</span>
                    ))}
                    <span class="word-count">
                        {formatWordCount(post.data.wordCount)} 字
                    </span>
                </div>
                <div class="post-date">
                    <p>{new Date(post.data.published).toISOString().substring(0, 10)}</p>
                </div>
            </div>
        </a>
    ))
}
